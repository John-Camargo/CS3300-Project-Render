{% extends "base.html" %}

{% block title %}Sign In - CS3300 Car Site{% endblock %}

{% block content %}

</style>
</head>
<!--Import css files as stylesheets-->
<link rel="stylesheet" href="../CSS_Files/userstyle.css">
<link rel="stylesheet" href="../CSS_Files/dropdownbutton.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!--Import icons-->
<body>


<!-- <div class="user">
  <div class="user-button">
    <a href="Main_Pages/userpage.html">
      <i class="fa fa-user fa-2x"></i>
    </a>
  </div>
</div> -->



<!--Row of Dropdown Menus for Car Search-->
<div class="header">
    <div class="dropdown">
        <div onclick="myFunction('modelDrop')" class="dropbtn">Model</div>
        <div id="modelDrop" class="dropdown-content">
            <input type="text" placeholder="Search.." id="modelInput" onkeyup="filterFunction('modelDrop', 'modelInput')">
          <a href="#">Honda</a>
          <a href="#">Toyota</a>
          <a href="#">Ford</a>
        </div>
      </div>
          <div class="dropdown">
            <div onclick="myFunction('yearDrop')" class="dropbtn">Year</div>
            <div id="yearDrop" class="dropdown-content">
                <input type="text" placeholder="Search.." id="yearInput" onkeyup="filterFunction('yearDrop', 'yearInput')">
              <a href="#">Link 1</a>
              <a href="#">Link 2</a>
              <a href="#">Link 3</a>
            </div>
          </div>
          <div class="dropdown">
            <div onclick="myFunction()" class="dropbtn">Smthn</div>
            <div id="myDropdown2" class="dropdown-content">
                <input type="text" placeholder="Search.." id="myInput2" onkeyup="filterFunction()">
              <a href="#">Link 1</a>
              <a href="#">Link 2</a>
              <a href="#">Link 3</a>
            </div>
          </div>
          <div class="dropdown">
            <div onclick="myFunction('usedDrop')" class="dropbtn">Used/New</div>
            <div id="usedDrop" class="dropdown-content">
                <input type="text" placeholder="Search.." id="usedInput" onkeyup="filterFunction('usedDrop', 'usedInput')">
              <a href="#">Used</a>
              <a href="#">New</a>
              <a href="#">Either</a>
            </div>
          </div>
  <p>This is text i can change</p>
</div>



<script src="../CSS_Files/javafile.js"></script>
<!--
<script>
/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
function myFunction(dropdownid)
{
  document.getElementById(dropdownid).classList.toggle("show");
}

function filterFunction(dropdownid, inputid)
{
  const input = document.getElementById(inputid);
  const filter = input.value.toUpperCase();
  const div = document.getElementById(dropdownid);
  const a = div.getElementsByTagName("a");
  for (let i = 0; i < a.length; i++)
  {
    txtValue = a[i].textContent || a[i].innerText;
    if (txtValue.toUpperCase().indexOf(filter) > -1)
    {
      a[i].style.display = "";
    }
    else
    {
      a[i].style.display = "none";
    }
  }
}

function filterTable() {
const makeInput = document.getElementById("modelInput").value.toUpperCase();
const yearInput = document.getElementById("yearInput").value.toUpperCase();
const rows = document.querySelectorAll("#csvTable tbody tr");

rows.forEach(row =>
{
  const make = row.cells[1].textContent.toUpperCase();
  const year = row.cells[0].textContent.toUpperCase();

  // Check if row matches the filter
  const makeMatch = make.indexOf(makeInput) > -1;
  const yearMatch = year.indexOf(yearInput) > -1;

  if (makeMatch && yearMatch)
  {
      row.style.display = "";
  }
  else
  {
      row.style.display = "none";
  }
});
}

// Call `filterTable` on keyup events for filtering inputs
document.getElementById("modelInput").addEventListener('keyup', filterTable);
document.getElementById("yearInput").addEventListener('keyup', filterTable);

function toggleUserDropdown()
{
  var dropdown = document.getElementById("userDropdown");
  if (dropdown.style.display === "none" || dropdown.style.display === "")
  {
    dropdown.style.display = "block";
  }
  else
  {
    dropdown.style.display = "none";
  }
}

</script>
-->

<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
</head>

<title>CSV Data Display</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <style>
        table {
            width: 50%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 8px 12px;
            border: 1px solid #ddd;
            text-align: left;
        }
    </style>



  <h1>CSV Data Display</h1>
  <table id="csvTable">
      <thead>
          <tr>
              <th>Year</th>
              <th>Make</th>
              <th>Model</th>
              <th>Miles</th>
              <th>Sale Price</th>
              <th>Status</th>
              <th>Mode of Purchase</th>
          </tr>
      </thead>
      <tbody>
      <!-- Rows will be inserted here -->
      </tbody>
  </table>

  <script src="../Data/cars">
      // Load CSV data
      document.addEventListener('DOMContentLoaded', function() {
          Papa.parse("available_cars2.csv", {
              download: true,
              header: true, // Consider the first row as headers
              complete: function(results) {
                console.log(results.data); // Add this line to check if data is fetched
                displayTable(results.data);
              }
          });
      });

      // Function to display CSV data in the table
      function displayTable(data) {
          const tableBody = document.querySelector("#csvTable tbody");
          tableBody.innerHTML = "";  // Clear the table before appending data

          data.forEach(row => {
              let rowHTML = "<tr>";
              rowHTML += `<td>${row.Year}</td>`;
              rowHTML += `<td>${row.Make}</td>`;
              rowHTML += `<td>${row.Model}</td>`;
              rowHTML += `<td>${row.Miles}</td>`;
              rowHTML += `<td>${row.Sale_Price}</td>`;
              rowHTML += `<td>${row.Status}</td>`;
              rowHTML += `<td>${row.Mode_of_Purchase}</td>`;
              rowHTML += "</tr>";

              tableBody.insertAdjacentHTML('beforeend', rowHTML);
          });
      }
  </script>




</body>
</html>

{% endblock %}